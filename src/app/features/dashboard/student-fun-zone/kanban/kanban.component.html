<div class="kanban-container">
  <button class="btn-back" routerLink="/fun-zone">â† Nazad</button>

  <h1 class="kanban-title">ğŸ“‹ Kanban PloÄa</h1>

  <div class="kanban-board">
    <div 
      *ngFor="let column of columns" 
      class="kanban-column"
      (dragover)="onDragOver($event)"
      (drop)="onDrop($event, column.id)">
      
      <div class="column-header">
        <h2>{{ column.title }}</h2>
        <div class="column-actions">
          <button class="btn-add" (click)="openAddTaskModal(column.id)" title="Dodaj zadatak">
            +
          </button>
          <button class="btn-clear" (click)="clearColumn(column.id)" title="ObriÅ¡i sve">
            ğŸ—‘ï¸
          </button>
        </div>
      </div>

      <div class="tasks-list">
        <div 
          *ngFor="let task of column.tasks"
          class="task-card"
          draggable="true"
          (dragstart)="onDragStart(task, column.id)">
          
          <div class="task-header">
            <h3>{{ task.title }}</h3>
            <button class="btn-delete" (click)="deleteTask(column.id, task.id)" title="ObriÅ¡i">
              âœ•
            </button>
          </div>
          
          <p *ngIf="task.description" class="task-description">
            {{ task.description }}
          </p>
        </div>

        <div *ngIf="column.tasks.length === 0" class="empty-state">
          <p>Nema zadataka</p>
        </div>
      </div>
    </div>
  </div>


  <div class="modal-overlay" *ngIf="showAddTaskModal" (click)="closeAddTaskModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h2>Dodaj novi zadatak</h2>
      
      <form (ngSubmit)="addTask()">
        <div class="form-group">
          <label for="taskTitle">Naslov zadatka *</label>
          <input 
            type="text" 
            id="taskTitle"
            [(ngModel)]="newTaskTitle"
            name="taskTitle"
            placeholder="Unesite naslov..."
            required
            autofocus>
        </div>

        <div class="form-group">
          <label for="taskDescription">Opis (opciono)</label>
          <textarea 
            id="taskDescription"
            [(ngModel)]="newTaskDescription"
            name="taskDescription"
            placeholder="Unesite opis zadatka..."
            rows="4">
          </textarea>
        </div>

        <div class="modal-actions">
          <button type="button" class="btn-cancel" (click)="closeAddTaskModal()">
            OtkaÅ¾i
          </button>
          <button type="submit" class="btn-submit" [disabled]="!newTaskTitle.trim()">
            Dodaj
          </button>
        </div>
      </form>
    </div>
  </div>
</div>