<div class="tracker-wrapper">
    <header class="tracker-header">
      <button class="btn-back" (click)="goBack()">â† Nazad</button>
      <h1>ğŸ½ï¸ Meal Planner</h1>
      <button class="btn-add" (click)="showForm = !showForm">
        {{ showForm ? 'OtkaÅ¾i' : '+ Dodaj Plan' }}
      </button>
    </header>
  
    <div class="stats-container">
      <div class="stat-card">
        <div class="stat-icon">ğŸ”¥</div>
        <div class="stat-info">
          <h3>{{ getAverageCalories() }}</h3>
          <p>ProsjeÄno kalorija/dan</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ“Š</div>
        <div class="stat-info">
          <h3>{{ getTotalCalories() }}</h3>
          <p>Ukupno kalorija</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ“…</div>
        <div class="stat-info">
          <h3>{{ mealEntries.length }}</h3>
          <p>Dana evidentirano</p>
        </div>
      </div>
    </div>
  
    <div class="add-form" *ngIf="showForm">
      <form [formGroup]="mealForm" (ngSubmit)="addMealEntry()">
        <div class="form-grid">
          <div class="form-group">
            <label>Datum</label>
            <input type="date" formControlName="date" />
          </div>
          <div class="form-group">
            <label>ğŸ¥ DoruÄak</label>
            <input type="text" formControlName="breakfast" placeholder="npr. Pahuljice" />
          </div>
          <div class="form-group">
            <label>ğŸ RuÄak</label>
            <input type="text" formControlName="lunch" placeholder="npr. Piletina sa povrÄ‡em" />
          </div>
          <div class="form-group">
            <label>ğŸ² VeÄera</label>
            <input type="text" formControlName="dinner" placeholder="npr. Riba sa salatom" />
          </div>
          <div class="form-group">
            <label>ğŸ UÅ¾ina</label>
            <input type="text" formControlName="snacks" placeholder="VoÄ‡e, orasi..." />
          </div>
          <div class="form-group">
            <label>Kalorije (ukupno)</label>
            <input type="number" formControlName="calories" min="0" placeholder="2000" />
          </div>
          <div class="form-group full-width">
            <label>BiljeÅ¡ke</label>
            <textarea formControlName="notes" rows="3" placeholder="Dodatne informacije..."></textarea>
          </div>
          <button type="submit" class="btn-submit" [disabled]="mealForm.invalid">
            ğŸ’¾ SaÄuvaj
          </button>
        </div>
      </form>
    </div>
  
    <div class="loading" *ngIf="isLoading">
      <div class="spinner"></div>
      <p>UÄitavanje...</p>
    </div>
  
    <div class="entries-container" *ngIf="!isLoading">
      <div class="empty-state" *ngIf="mealEntries.length === 0">
        <div class="empty-icon">ğŸ½ï¸</div>
        <h2>Nema planiranih obroka</h2>
        <p>Dodaj prvi meal plan!</p>
      </div>
  
      <div class="entries-list" *ngIf="mealEntries.length > 0">
        <div *ngFor="let entry of mealEntries" class="entry-card">
          <div class="entry-header">
            <div class="entry-date">
              <span class="date-icon">ğŸ“…</span>
              <span>{{ formatDate(entry.date) }}</span>
            </div>
            <button class="btn-delete" (click)="deleteMealEntry(entry.id)">ğŸ—‘ï¸</button>
          </div>
  
          <div class="meals-grid">
            <div class="meal-item">
              <div class="meal-label">ğŸ¥ DoruÄak</div>
              <div class="meal-content">{{ entry.breakfast }}</div>
            </div>
            <div class="meal-item">
              <div class="meal-label">ğŸ RuÄak</div>
              <div class="meal-content">{{ entry.lunch }}</div>
            </div>
            <div class="meal-item">
              <div class="meal-label">ğŸ² VeÄera</div>
              <div class="meal-content">{{ entry.dinner }}</div>
            </div>
            <div class="meal-item" *ngIf="entry.snacks">
              <div class="meal-label">ğŸ UÅ¾ina</div>
              <div class="meal-content">{{ entry.snacks }}</div>
            </div>
          </div>
  
          <div class="entry-footer">
            <div class="calories-badge" *ngIf="entry.calories > 0">
              ğŸ”¥ {{ entry.calories }} kcal
            </div>
          </div>
  
          <div class="entry-notes" *ngIf="entry.notes">
            <strong>BiljeÅ¡ke:</strong> {{ entry.notes }}
          </div>
        </div>
      </div>
    </div>
  </div>