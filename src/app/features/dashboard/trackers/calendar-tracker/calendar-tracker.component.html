<div class="tracker-wrapper">
    <header class="tracker-header">
      <button class="btn-back" (click)="goBack()">â† Nazad</button>
      <h1>ğŸ“… Calendar Tracker</h1>
      <button class="btn-add" (click)="showForm = !showForm">
        {{ showForm ? 'OtkaÅ¾i' : '+ Dodaj DogaÄ‘aj' }}
      </button>
    </header>
  
    <div class="stats-container">
      <div class="stat-card">
        <div class="stat-icon">ğŸ“Š</div>
        <div class="stat-info">
          <h3>{{ calendarEntries.length }}</h3>
          <p>Ukupno dogaÄ‘aja</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">â³</div>
        <div class="stat-info">
          <h3>{{ getUpcomingEntries().length }}</h3>
          <p>Predstoji</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">âœ…</div>
        <div class="stat-info">
          <h3>{{ getCompletedCount() }}</h3>
          <p>ZavrÅ¡eno</p>
        </div>
      </div>
    </div>
  
    <div class="add-form" *ngIf="showForm">
      <form [formGroup]="calendarForm" (ngSubmit)="addCalendarEntry()">
        <div class="form-grid">
          <div class="form-group">
            <label>Naslov</label>
            <input type="text" formControlName="title" placeholder="npr. Sastanak sa timom" />
          </div>
          <div class="form-group">
            <label>Tip</label>
            <select formControlName="type">
              <option value="event">ğŸ‰ DogaÄ‘aj</option>
              <option value="task">âœ… Zadatak</option>
              <option value="reminder">â° Podsjetnik</option>
              <option value="meeting">ğŸ‘¥ Sastanak</option>
            </select>
          </div>
          <div class="form-group">
            <label>Datum</label>
            <input type="date" formControlName="date" />
          </div>
          <div class="form-group">
            <label>Vrijeme</label>
            <input type="time" formControlName="time" />
          </div>
          <div class="form-group full-width">
            <label>Opis</label>
            <textarea formControlName="description" rows="3" placeholder="Detalji..."></textarea>
          </div>
          <button type="submit" class="btn-submit" [disabled]="calendarForm.invalid">
            ğŸ’¾ SaÄuvaj
          </button>
        </div>
      </form>
    </div>
  
    <div class="filter-tabs">
      <button [class.active]="filterType === 'all'" (click)="filterType = 'all'">
        Sve ({{ calendarEntries.length }})
      </button>
      <button [class.active]="filterType === 'event'" (click)="filterType = 'event'">
        ğŸ‰ DogaÄ‘aji
      </button>
      <button [class.active]="filterType === 'task'" (click)="filterType = 'task'">
        âœ… Zadaci
      </button>
      <button [class.active]="filterType === 'reminder'" (click)="filterType = 'reminder'">
        â° Podsjetnici
      </button>
      <button [class.active]="filterType === 'meeting'" (click)="filterType = 'meeting'">
        ğŸ‘¥ Sastanci
      </button>
    </div>
  
    <div class="loading" *ngIf="isLoading">
      <div class="spinner"></div>
      <p>UÄitavanje...</p>
    </div>
  
    <div class="entries-container" *ngIf="!isLoading">
      <div class="empty-state" *ngIf="filteredEntries.length === 0">
        <div class="empty-icon">ğŸ“…</div>
        <h2>Nema dogaÄ‘aja</h2>
        <p>Dodaj prvi dogaÄ‘aj u kalendar!</p>
      </div>
  
      <div class="entries-list" *ngIf="filteredEntries.length > 0">
        <div 
          *ngFor="let entry of filteredEntries" 
          class="entry-card"
          [class.completed]="entry.completed"
          [class.today]="isToday(entry.date)"
          [class.past]="isPast(entry.date) && !entry.completed"
        >
       
  
          <div class="entry-content">
            <div class="entry-header">
              <div class="entry-title-section">
                <span class="type-icon">{{ getTypeIcon(entry.type) }}</span>
                <h3 [class.strikethrough]="entry.completed">{{ entry.title }}</h3>
              </div>
              <button class="btn-delete" (click)="deleteCalendarEntry(entry.id)">ğŸ—‘ï¸</button>
            </div>
  
            <div class="entry-meta">
              <span class="date-badge" [class.today]="isToday(entry.date)">
                ğŸ“… {{ formatDate(entry.date) }}
              </span>
              <span class="time-badge">
                â° {{ entry.time }}
              </span>
              <span class="type-badge" [style.background-color]="getTypeColor(entry.type) + '20'" [style.color]="getTypeColor(entry.type)">
                {{ getTypeName(entry.type) }}
              </span>
            </div>
  
            <p class="entry-description" *ngIf="entry.description">{{ entry.description }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>