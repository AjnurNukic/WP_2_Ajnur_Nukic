<div class="tracker-wrapper">

    <header class="tracker-header">
      <button class="btn-back" (click)="goBack()">
        â† Nazad
      </button>
      <h1>âœ… Habit Tracker</h1>
      <button class="btn-add" (click)="showForm = !showForm">
        {{ showForm ? 'OtkaÅ¾i' : '+ Dodaj Naviku' }}
      </button>
    </header>
  

    <div class="add-form" *ngIf="showForm">
      <form [formGroup]="habitForm" (ngSubmit)="addHabit()">
        <div class="form-row">
          <div class="form-group">
            <label>Naziv navike</label>
            <input 
              type="text" 
              formControlName="name"
              placeholder="npr. VjeÅ¾baj 30 minuta"
            />
          </div>
  
          <div class="form-group">
            <label>Frekvencija</label>
            <select formControlName="frequency">
              <option value="daily">Dnevno</option>
              <option value="weekly">SedmiÄno</option>
              <option value="monthly">MjeseÄno</option>
            </select>
          </div>
  
          <button type="submit" class="btn-submit" [disabled]="habitForm.invalid">
            SaÄuvaj
          </button>
        </div>
      </form>
    </div>
  

    <div class="loading" *ngIf="isLoading">
      <div class="spinner"></div>
      <p>UÄitavanje navika...</p>
    </div>
  

    <div class="habits-container" *ngIf="!isLoading">
      

      <div class="empty-state" *ngIf="habits.length === 0">
        <div class="empty-icon">ğŸ“‹</div>
        <h2>NemaÅ¡ joÅ¡ navika</h2>
        <p>Klikni na "Dodaj Naviku" da kreiraÅ¡ prvu naviku!</p>
      </div>
  

      <div class="habits-grid" *ngIf="habits.length > 0">
        <div 
          *ngFor="let habit of habits" 
          class="habit-card"
          [class.completed]="isCompletedToday(habit)"
        >

          <div class="card-header">
            <h3>{{ habit.name }}</h3>
            <button class="btn-delete" (click)="deleteHabit(habit.id)">
              ğŸ—‘ï¸
            </button>
          </div>
  

          <div class="streak-info">
            <div class="streak-badge">
              ğŸ”¥ {{ habit.streak }} dana zaredom
            </div>
            <div class="frequency-badge">
              {{ habit.frequency === 'daily' ? 'Dnevno' : habit.frequency === 'weekly' ? 'SedmiÄno' : 'MjeseÄno' }}
            </div>
          </div>
  

          <button 
            class="btn-complete"
            [class.completed]="isCompletedToday(habit)"
            (click)="toggleComplete(habit)"
          >
            <span class="check-icon">{{ isCompletedToday(habit) ? 'âœ“' : 'â—‹' }}</span>
            <span>{{ isCompletedToday(habit) ? 'ZavrÅ¡eno danas!' : 'OznaÄi kao zavrÅ¡eno' }}</span>
          </button>
  

          <div class="progress-info">
            <small>Ukupno kompletiranih dana: {{ habit.completedDates.length }}</small>
          </div>
        </div>
      </div>
  
    </div>
  </div>